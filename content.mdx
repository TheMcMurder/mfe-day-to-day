# Midichlorians, the Force, and MFES

## powered by [minideck](https://github.com/filoxo/minideck)

---

# Feedback requested
- Feedback will produce additional presentations (or not)

---

# What this presentation is not

- <Appear>The last presenation</Appear>
- <Appear>Technical deep dive into how MFEs work at every level</Appear>

---

# What this will cover
- <Appear>What is taking so long</Appear>
- <Appear>An overview of DX in MFE land</Appear>
- <Appear>MFE Misconceptions</Appear>
- <Appear>Why Star Wars is the best movie franchise of all time</Appear>
- <Appear>Technical details where it makes sense</Appear>

---

# What is taking so long?

TL;DR It's all about the DX. Oh... And a CDN bug that AWS engineers can't figure out.

---

## So long - Migration - Stage 0
![Stage 0 - Where we currently are](https://i.imgur.com/YEzy5Zx.png){.mx-auto .h-64}

---

## So long - Migration - Stage 1
![Stage 1 - Next Stage: Give single-spa/SystemJS control over the page](https://i.imgur.com/LXajsGW.png){.mx-auto .h-64}
<Appear>Teams can technically start using MFEs - but...</Appear>

---

## So long - Migration - Stage 2
![Stage 2 - Move global context services out of Quicksilver](https://i.imgur.com/vxfekQG.png){.mx-auto .h-64}
<Appear>Teams can technically start using MFEs - but...</Appear>

---

## So long - Migration - Stage 3
![Stage 3 - Move Primary navigation out of Quicksilver](https://i.imgur.com/nDbxUbi.png){.mx-auto .h-64}
<Appear>On completion of Stage 3. The DX will be better. Better incremental path to success.</Appear>

---

## So long - Migration - Stage 4
- <Appear>Embed with a few teams and migrate a few areas. Ensure that DX is good and MFE Utilities make sense</Appear>
- <Appear>After successful embedding. MFE general availabiliy</Appear>
- <Appear>Support Teams as they migrate</Appear>
- <Appear>Continually tackle feedback and improve DX</Appear>

---

## So long - Migration - Stage ?
![Stage X - Completed migration: All modules have been extracted from QS and now teams can tackle their shims/tech debt with MFE benefits](https://i.imgur.com/6oDiI8o.png){.mx-auto .h-64}

---

## So long - But the DX _now_ stinks
- Goal is DX nirvanna. We're working on improvements to the current experience.
- Send us feedback (#ask-web-platform). We want to get it right.

---

## So long - CDN bug
- <Appear>For some reason `origin` header isn't being recieved by cloudfront in some cases</Appear>
- <Appear>We can prove that it's being sent</Appear>
- <Appear>AWS can prove that they aren't getting it</Appear>
- <Appear>Our latest change _should_ work around the issue.</Appear>
- <Appear>But we've thought that before...</Appear>

---

# MFE Misconceptions

---

## Misconception - Autonomy and alignment
- Not anarchy
- Not a mutually exclusive relationship
<Appear>
  <img src='https://miro.medium.com/max/1300/1*3PQHnnpNKsVAJhNts_GhPQ.png' class='mx-auto h-64'></img>
</Appear>

---

## Misconception - Standarization/Consistency and Flexibility

- <Appear>Standardization helps enable flexibility/autonomy</Appear>
- <Appear>MFE utilities (data-fetching, notification-service, etc) replace QS context and provide APIs to access data</Appear>
- <Appear>Hate the exposed APIs? Open an issue on it, propose a change, etc.</Appear>

---

## Misconception - Module federation

|  Â       | Module Federation   |  SystemJS                |
| ------- | ------------------- | ------------------------ |
| format  | CommonJS only       | System.register prefered |
| registry| set/get             | set/get/import/delete/etc|
| build   | webpack/rollup      | webpack/rollup/others    |
| esm*    | CJS features only   | Supports ESM features    |

<p className='text-xs pt-4'><span className='text-red-500'>*</span> referring to module format supporting ESM features. IE live bindings</p>

---

## Misconception - Browser specifications

- Import maps are a browser specification that is actively being implemented
- SystemJS provides an import-map polyfill and a related module registry

---

# How MFEs will change day to day work

---

## DX - More autonomy
- <Appear>Deploy code when it makes sense for your team</Appear>
- <Appear>Ownership over codebase</Appear>
- <Appear>Internal open source</Appear>

---

## DX - say goodbye to NPM modules

- ~~yarn link ...~~

---

## DX - overriding modules

- React v17 (Demo)
- Navbar (Demo)

---

## DX - more improvements planned
- <Appear>Getting the correct URL</Appear>
- <Appear>Certificate management stuff</Appear>
- <Appear>Hot reloading</Appear>
- <Appear>Dependency Analysis</Appear>
- <Appear>Deprecation Warnings</Appear>
- <Appear>Custom lint tools</Appear>

---

## Thanks! 

[Back to beginning](/0)